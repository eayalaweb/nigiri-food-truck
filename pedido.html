<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PEDIDOS</title>

     <link rel="stylesheet" href="css/estilos.css">


    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous"> -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
  </head>
  <body class="bg-color-tema">

  <!-------------NAVBAR----------------->
<nav class="navbar fixed-top navbar-expand-lg bg-color-tema" data-bs-theme="bg-dark">
      <div class="container">
        <a class="navbar-brand" href="index.html"><img src="img/logoo.svg" width="50%"></a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0"> <!----mx-auto va al medio / me va a la izk / ms al final--->
                <li class="nav-item me-3">
                  <a class="nav-link active"  href="quienes-somos.html">SOBRE NOSOTROS</a>
                </li>
                <li class="nav-item me-3">
                  <a class="nav-link" href="personaliza.html">PERSONALIZAR</a>
                </li>
                <li class="nav-item me-3">
                  <a class="nav-link" href="encuentranos.html">ENCUENTRANOS</a>
                </li>
                <li class="nav-item me-3">
                  <a class="nav-link" href="contacto.html">CONTACTO</a>
                </li>

                <li class="nav-item">
                  <a class="nav-link btn-body bg-naranja" href="pedido.html" aria-current="page">CARTA</a>
                </li>
            
          </ul>

        </div>
      </div>
</nav>

<!-------------HERO----------------->
<section class="container-w90 g-0  pt-5 hero-pedidos">
    <h1 class="titulo-h1">NUESTRA CARTA</h1>

   <div class="row">
    <div class="col-md-6">
            <h4>Haz tu pedido de sushi de forma simple y rápida a través de nuestra plataforma online.</h4>
            <p>Nosotros lo preparamos al momento con ingredientes frescos y lo dejamos listo para que puedas retirarlo directamente en nuestra food truck, sin demoras ni filas innecesarias.</p>
             <button type="button" class="btn btn-dark">contacto</button>
        </div>

       

    </div>

</section>

<!-- MENU- CHEKS BOX -->
<section class="container-w90 ">
    <!-- Makis -->
      <h3 class="encabezado-h3 text-center pb-3">URA MAKIS</h3>
        <div class="row pb-5">
                <div class="micard col-md-6 col-lg-2">
                <img src="img/sushi-1.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Roll Picante (6 Pza.)</h5>
                <p class="card-text">Surimi, aguacate, pepino, mayonesa y topping picante.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">10€</div>
                  </div>

                  <div class="col-6 text-end">
                      <input  type="checkbox" value="" id="roll1" data-nombre="Roll Picante" 
                      data-precio="10€" data-id="producto01" class="producto mt-3">
                      <label for="roll1" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
                </div>

                <!--  --> 
                <div class="micard col-md-6 col-lg-2">
                <img src="img/sushi-2.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Roll Especial con Atún (6 Pza.)</h5>
                <p class="card-text">Surimi, aguacate, pepino, mayonesa y láminas de atún fresco.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">14€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input  type="checkbox" value="" id="roll2" data-nombre="Roll Especial" data-precio="14€" data-id="producto02" class="producto mt-3">
                      <label for="roll2" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
                </div>
                <!--  -->
                <div class="micard col-md-6 col-lg-2">
                    <img src="img/sushi-3.png" width="100%" alt="sushi" class="border-img pb-2">
                    <h5 class="card-titulo">Roll Empanizado (6 Pza.)</h5>
                    <p class="card-text">Surimi, aguacate, pepino, mayonesa y empanizado crujiente.</p>

                    <div class="row align-items-center justify-content-center">
                      <div class="col-6">
                            <div class="precio ">9€</div>
                      </div>

                      <div class="col-6 text-end">
                        <input type="checkbox" value="" id="roll3" data-nombre="Roll Empanizado" data-precio="9€" data-id="producto03" class="producto mt-3">
                          <label for="roll3" class="btn bg-amarillo"> Añadir</label>
                          
                      </div>

                    </div>
                    
                </div>

                <!--  -->
                <div class="micard col-md-6 col-lg-2">
                    <img src="img/sushi-4.png" width="100%" alt="sushi" class="border-img pb-2">
                    <h5 class="card-titulo">Roll Clásico California (6 Pza.)</h5>
                    <p class="card-text">Surimi, aguacate, pepino y mayonesa, envuelto en arroz y alga.</p>

                    <div class="row align-items-center justify-content-center">
                      <div class="col-6">
                            <div class="precio ">14€</div>
                      </div>

                      <div class="col-6 text-end">
                        <input type="checkbox" value="" id="roll4" data-nombre="Roll Clásico California" data-precio="14€" data-id="producto04" class="producto mt-3">
                          <label for="roll4" class="btn bg-amarillo"> Añadir</label>
                          
                      </div>

                    </div>
                    
                </div>
            
        </div>

    <!-- NIGIRIS -->
    <h3 class="encabezado-h3 text-center pb-3">NIGIRIS</h3>
        <div class="row  pb-5">
            <div class="micard col-md-6 col-lg-2">
                <img src="img/sushi-5.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Salmón Nigiri (6 pza.)</h5>
                <p class="card-text">Láminas de salmón fresco sobre arroz avinagrado.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">9€</div>
                  </div>

                  <div class="col-6 text-end">
                          <input data-nombre="Salmón Nigiri" data-precio="9€" data-id="producto05" class="producto mt-3"  type="checkbox" value="" data-id="roll5" id="roll5">
                          <label for="roll5" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>

            <!--  --> 
          <div class="micard col-md-6 col-lg-2">
                <img src="img/sushi-6.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Atún Spicy Nigiri (6 pza.)</h5>
                <p class="card-text">Atún marinado con salsa picante sobre arroz japonés.</p>

                <div class="row align-items-center justify-content-center">
                    <div class="col-6">
                          <div class="precio ">8€</div>
                    </div>

                  <div class="col-6 text-end">
                        <input class="producto mt-3" type="checkbox" value="" data-id="roll6" id="roll6" data-nombre="Atún Spicy Nigiri" data-precio="8€">
                        <label for="roll6" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>
            <!--  -->
            <div class="micard col-md-6 col-lg-2">
                <img src="img/sushi-7.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Salmón con Cebollín Nigiri (6 pza.)</h5>
                <p class="card-text">Salmón fresco con topping de cebollín y salsa suave.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">7€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="roll7" data-nombre="Salmón con Cebollín Nigiri" data-precio="7€" data-id="producto07">
                      <label for="roll7" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>

            <!--  -->
            <div class="micard col-md-6 col-lg-2">
                <img src="img/sushi-8.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Salmón con Mayonesa (6 pza.)</h5>
                <p class="card-text">Salmón flameado con mayonesa japonesa.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">10€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="roll8" data-nombre="Salmón con Mayonesa" data-precio="10€" data-id="producto08">
                      <label for="roll8" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>
            
        </div>

    <!-- POSTRES -->
    <h3 class="encabezado-h3 text-center pb-3">POSTRES JAPONESES</h3>
        <div class="row pb-5 ">
            <div class="micard col-md-3">
                <img src="img/postre-1.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Dorayaki (2 pza.)</h5>
                <p class="card-text">Bizcocho japonés relleno de anko (pasta de judía roja dulce).</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">18€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="postre-1" data-nombre="Dorayaki" data-precio="18€" data-id="producto09">
                      <label for="postre-1" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>

            <!--  --> 
          <div class="micard col-md-3">
                <img src="img/postre-2.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Mochi (2 pza.)</h5>
                <p class="card-text">Dulce de arroz glutinoso con relleno de helado o pasta dulce.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">15€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="postre-2" data-nombre="Mochi" data-precio="15€" data-id="producto10">
                      <label for="postre-2" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>
            <!--  -->
            <div class="micard col-md-3">
                <img src="img/postre-3.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Taiyaki (1 pza.)</h5>
                <p class="card-text">Pastel en forma de pez relleno de crema o pasta dulce.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">14€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="postre-3" data-nombre="Taiyaki" data-precio="14€" data-id="producto11">
                      <label for="postre-3" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>
            
        </div>

        <!-- BEBIDAS -->
    <h3 class="encabezado-h3 text-center pb-3">BEBIDAS</h3>
        <div class="row pb-5 ">
            <div class="micard col-md-3">
                <img src="img/bebida-1.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Cerveza saporo</h5>
                <p class="card-text">Cerveza saporo 10% </p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">18€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="bebida-1" data-nombre="Cerveza Sapporo" data-precio="18€" data-id="producto12">
                      <label for="bebida-1" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>

            <!--  --> 
          <div class="micard col-md-3">
                <img src="img/bebida-2.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Bebida japones ramune</h5>
                <p class="card-text">Bebida japones ramune</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">15€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="bebida-2" data-nombre="Bebida Japonesa Ramune" data-precio="15€" data-id="producto13">
                      <label for="bebida-2" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>
            <!--  -->
            <div class="micard col-md-3">
                <img src="img/bebida-3.png" width="100%" alt="sushi" class="border-img pb-2">
                <h5 class="card-titulo">Agua</h5>
                <p class="card-text">Agua 500ml.</p>

                <div class="row align-items-center justify-content-center">
                  <div class="col-6">
                        <div class="precio ">3€</div>
                  </div>

                  <div class="col-6 text-end">
                    <input class="producto mt-3 " type="checkbox" value="" id="bebida-3" data-nombre="Bebida Japonesa Ramune" data-precio="3€" data-id="producto14">
                      <label for="bebida-3" class="btn bg-amarillo"> Añadir</label>
                      
                  </div>

                </div>
                
            </div>
            
        </div>

</section>

<!-- RESUMEN DE TU PEDIDO -->
<section class="container-fluid bg-rojo pt-5 pb-5">
      <article class="resumen" >
        <div class="align-items-center justify-content-center bg-color-tema p-5 m-auto w-50">
                <h3 class="text-center encabezado-h3">TU PEDIDO ESTÁ LISTO</h3>
                <table id="tablaPedidos">
                    <thead class="titulo-tabla" >
                        <tr>
                          
                            <th>Nº</th>
                            <th>Producto</th>
                            <th>Precio/u</th>
                            <th>Cantidad</th>
                            <th>Total</th>
                        </tr>
                    </thead>

                    <tbody id="tableItems" class="tabla-body">
                        <!-- Aqui metere el tr (filas) de forma dinamica a traves de JS cuando el usuario clickea o no en el product -->
                    </tbody>
                </table>

                <div id="totalCompra" class="text-center text-total">
                    <span>TOTAL:</span>
                    <span id="total" data-total="0"></span>
                </div>

                <div class="boton m-auto " id="botonPagar">HACER EL PEDIDO</div>
          </div>
      </article>
</section>

<!-- ************************************************************ -->
<!-- CONFIRMA TU PEDIDO - MODAL-->
<section class="container g-0">

    <div id="modal">
        <article class="resume" id="contenedorModal">
                  <span id="cerrar">X</span>
                  <h3 class="encabezado-h3">CONFIRMA TU PEDIDO</h3>
                  <!-- aqui ira la tabla clonada de forma dinamica desde JS-->

                  <div>
                      <!-- <span>TOTAL:</span> -->
                      <span id="totalmodal" data-total="0"></span>
                  </div>

            <!-- <div class="boton" id="botonConfirmar">HACER EL PEDIDO</div> -->

              <form>
                  <div  class="row">
                          <div class="col-12 col-md-6">
                                <label for="nom">Nombre</label>
                                <input type="text" name="nom" id="nom">

                                <label for="tel">Teléfono</label>
                                <input type="tel" name="tel" id="tel">
                          </div>
                          <div class="col-12 col-md-6">
                                <label for="dir">Dirección</label>
                                <input type="text" name="dir" id="dir">
                                
                                <label for="coment">Comentarios</label>
                                <textarea name="coment" id="coment"></textarea>

                                <div class="terminos">
                                    <label for="terminos">Aceptar términos y condiciones de política de privacidad</label>
                                    <input type="checkbox" name="terminos" id="terminos">                            
                                </div>
                                <input type="submit" value="Finalizar y Pagar" class="boton" id="terminos">
                          </div>  
                      </div>    
                  </form>
                  
        </article>
    </div>
                        
    



</section>
<!-- TODO; mejorar el modal -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"> </script>

    <script>
// JS UNA VEZ SE CARGE EN EL DOM

// recoger el html en constantes
// recoger todos los imputs a traves de la clase productos
const productos = document.getElementsByClassName("producto")
const tableItems = document.getElementById("tableItems")
const total = document.getElementById("total") //Span donde totalizo la compra


// Contar filas de cada TD
function contarFilas(){
        // Recojo todas las filas sólo cuando llamo a esta función
        const filas = document.querySelectorAll(".fila")
        let contador = 0

        //Hago una iteración mediante foreach
        filas.forEach(fila => {

            const tds = fila.querySelectorAll('td')
            let primerTd = tds[0]

            console.log(primerTd)
            if(primerTd){
                contador = contador + 1
                console.log(contador)
                primerTd.innerText=contador
            }
        }); 
    }

// recorrer en un FOR OF todos los product, en cada interación trabajare con cada uno 
for(const producto of productos){
    producto.addEventListener("change", function(){
        //   console.log(producto)

        // Recojo en constantes los datos de ese INPUT que a sufrido el evento CHANGE (nombre, id y precio)
        const id = producto.getAttribute("data-id")
        const nombre = producto.getAttribute("data-nombre")


        let precio = producto.getAttribute("data-precio") // es una variable para operar con ella
        let cantidad = "1"  //  luego vendria dinamico
        let totalLinea = 0 //  LA usaremos para multiplicar cantidad por precio unitario
        let totalCompraNuevo = 0 // Aqui calcularemos el nuevo total 
        

        let totalCompra = total.getAttribute("data-total") //  aqui tendremos el total como texto y en una data
        totalCompra = parseFloat(totalCompra) // Paso el valor a un número decimal para poder operar

        // GESTIÓN DEL TOTAL POR LINEA
        precio = parseFloat(precio)
        cantidad = parseFloat(cantidad)
        totalLinea = precio * cantidad



        // Condición para actuar en función de si el input esta o no checked
        if(producto.checked){
            // Si ese input esta checked añado a la tabla un nuevo TR (fila) con los TD y los datos de ese producto
            // console.log("el input ${id} lo han checkeado")

            // crear elementos HTML desde JS, para luego meter atributos y valores despues inyectarlos en el HTML

             // EM: Solo hemos creado TR entonces en el tbody tenemos que CREAR los TD 
            const tr = document.createElement("tr")
            const td1 = document.createElement("td")
            const td2 = document.createElement("td")
            const td3 = document.createElement("td")
            const td4 = document.createElement("td")
            const td5 = document.createElement("td")

            // asigno valores
            // EM: Aqui a cada TD le asignamos un constante que hace el evento mediante la data
            tr.setAttribute("id", id)
             tr.setAttribute("class", "fila")
            td1.innerText = "#"
            td2.innerText = nombre
            td3.innerText = precio + "€"
            td4.innerText = cantidad
            td5.innerText = totalLinea + "€"
            // anidamiento appenChild
            tr.appendChild(td1)
            tr.appendChild(td2)
            tr.appendChild(td3)
            tr.appendChild(td4)
            tr.appendChild(td5)
            tableItems.appendChild(tr)

            // Gestión del total de la compra (sumar)
            totalCompraNuevo = totalCompra + totalLinea
            total.setAttribute("data-total", totalCompraNuevo)
            total.innerText = totalCompraNuevo + "€"

        }else{

            // Si ese input NO esta checked, busco el TR que tenga el mismo ID de este data-id del input y lo quito
            // console.log("El input ${id} lo han descheckeado")
            document.getElementById(id).remove()

            // Gestión del total de la compra (restar)
            totalCompraNuevo = totalCompra - totalLinea
            total.setAttribute("data-total", totalCompraNuevo)
            total.innerText = totalCompraNuevo + "€"
        }

         contarFilas() // Llamo a la función que cuenta las filas y actualiza el primer TD de cada fila

    })

}




// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// GESTION DE MODAL Y CLONACION DE TABLA
const botonPagar = document.getElementById("botonPagar")
const cerrar = document.getElementById("cerrar")
const modal = document.getElementById("modal")

const contenedorModal = document.getElementById("contenedorModal") 
const tablaPedidos = document.getElementById("tablaPedidos")
const totalFinal = document.getElementById("totalFinal")



// si se hace click sobre botonPedido, abro modal
botonPagar.addEventListener("click", function(){

    //Clono el html de la tabla con todos sus hijos(true)
    const tablaPedidosClonada = tablaPedidos.cloneNode(true)
    const totalCompraClonada = totalCompra.cloneNode(true)


    //Comprobamos si hay tabla y si la hay la quito

    const tablaAnterior = contenedorModal.querySelector('table')
    if(tablaAnterior){
        tablaAnterior.remove()
     
    }
    contenedorModal.insertBefore(tablaPedidosClonada, contenedorModal.children[2])
    contenedorModal.insertBefore(totalCompraClonada, contenedorModal.children[3])


    modal.style.display = "flex"

})
     
// si hago click sobre el boton de id close, se cierra
cerrar.addEventListener("click", function(){
    modal.style.display = "none"

})



 </script>
  </body>

 <!-------------FOOTER----------------->
<footer class=" bg-micolor pt-5 p-5">
      <div class="row ">
          <div class="col-md-6 ">
                <h5 class="footer-h5 text-rojo ">SABORES JAPONESES SOBRE RUEDAS. SUSHI FRESCO TODOS LOS DÍAS.</h5>

          </div>
<!-- Contacto -->
          <div class="col-md-6">
            <div class="row">
                  <div class="col-6">
                      <h5 class="info-footer">CONTACTO</h5>
                      <div class="d-flex ">
                        <!-- <i class="fa-regular fa-truck"></i> -->
                        <img src="img/bus.svg" width="5%" alt="" class="me-3"> 
                        <p> Donostia - San Sebastián</p>

                      </div>

                      <div class="d-flex ">
                        <img src="img/call.svg" alt="" width="5%" alt="" class="me-3">
                        <p> +36  65 84 78 35</p>
                      </div>

                      <div class="d-flex ">
                        <img src="img/cloud-upload.svg" alt="" width="5%" alt="" class="me-3">
                        <p>info @nigirifoodtruck.com</p>
                      </div>

                  </div>


                  <div class="col-6">
                      <h5 class="info-footer">INFORMACIÓN</h5>
                      <a href="#" class="footer-link"> Inicio </a> <br> 
                      <a href="#" class="footer-link"> Sobre nosotros </a> <br>
                      <a href="#" class="footer-link"> Personalizar </a> <br>
                      <a href="#" class="footer-link"> Encontrar </a> <br>
                      <a href="#" class="footer-link"> Contacto </a> <br>
                      <a href="#" class="footer-link"> Pedidos </a> <br>


                  </div>
              </div>
          </div>
      </div>
    
</footer>

</html>